# Go言語で Apache Arrow

今ではほとんどのデータ分析パイプラインはPythonで書かれています。これは NumPy, SciPyなどの便利なモジュールが充実している事にも起因しています。

一方でGo言語はPythonを使うよりもよりも多くのメリットを我々にもたらしてくれます。

* Goは純粋なPythonより速い。
* 並行性を扱う場合、Goコードはよりシンプルに記述できる。

ゆえにデータ分析をGo言語で書きたいというモチベーションは当然の事です。しかし、Pythonの充実したデータ分析用モジュールには郡にはやはり敵わないのでしょうか。

実は Python の NumPy や SciPy を使って実行できるほとんどのことは、Gonum パッケージなどのデータフォーマットを使って実行できます。

しかし、新しい分析パイプラインと統合するときには、あるファイルフォーマットから別のファイルフォーマットへのリーダー、ライター、コンバーターを実装する必要があります。

## Apache Arrow とは
> Apache Arrowは、インメモリデータ用の言語間開発プラットフォームです。 それはフラットのための標準化された言語非依存の円柱状メモリフォーマットを指定します モダンで効率的な分析操作のために編成された階層データ ハードウェア また、計算ライブラリとゼロコピーストリーミングメッセージングも提供します。

Apache Arrow の背景にある考え方は、構造化データを表現し、このデータを言語やプロセス間で効率的に共有するための、言語間のオープンスタンダードとして実装することです。Apache Arrowは数年後にはデータ処理界隈で非常に注目されている技術です。

特徴は3つ

## 速度

下記の点で Apache Arrow は速度を最適化しています。
* データ交換
* 並列処理

## 柔軟性

Apache Arrow はさまざまなシステム間の新しい高性能インターフェースとして機能します。また、業界標準の幅広いプログラミング言語のサポートにも焦点を当てています。Java、C、C ++、Python、Ruby、およびJavaScriptなど多くの言語で扱えます。そして、オープンソースの時系列データベースInfluxDBの実装や管理サービスを提供するInfluxData が Apache Arrow を扱うGoパッケージを提供しています。

Apache Arrow はの世界から見ると、配列は長さがわかっている値のシーケンスであり、すべて同じ型を持ちます。Arrow配列は、「欠損」値、もしくは配列内のnullをサポートしています。Apache Arrow における int32 の配列を考えてみましょう。

詳細なデータ型が必要な場合はどうしましょう。構造体で表現されます。

```go
type Post struct {
	ID    int32
	Title string
	Tags  []string
	Body  string
}
```

入れ子になったデータを処理し、この種類のデータの効率的な表現を見つけることは、Apache Arrowプロジェクトの重要な機能です。この効率的な表現の詳細は、メモリレイアウトドキュメントに記載されています。 Arrowの構造化型は、指定されたスキーマを持つデータベース内のエントリと見なすことができます。多くのデータベースは行指向ですが、Arrowではデータは列指向です。

